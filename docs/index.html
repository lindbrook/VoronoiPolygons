<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>deldirPolygons: tiles, triangles and polygons • deldirPolygons</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="deldirPolygons: tiles, triangles and polygons">
<meta property="og:description" content="Compute the vertices of 'deldir' Voronoi tessellation tiles.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">deldirPolygons</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.9012</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/example.applications.html">Motivation and Application</a>
    </li>
    <li>
      <a href="articles/notes/tiles.polygons.html">* deldirPolygons(): Tiles, Triangles and Polygons</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/lindbrook/deldirPolygons">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<!-- README.md is generated from README.Rmd. Please edit that file -->

<div id="deldirpolygons-tiles-triangles-and-polygons" class="section level2">
<h2 class="hasAnchor">
<a href="#deldirpolygons-tiles-triangles-and-polygons" class="anchor"></a>deldirPolygons: tiles, triangles and polygons</h2>
<p>Using just the locations of sites or landmarks, Voronoi tessellation partitions a space into cells or tiles that represent those sites’ neighborhoods (i.e., their catchment or service areas). In contrast, Delauny triangulation connects sites to all their first order neighbors and partitions the space defined by the sites on the perimeter into triangles.</p>
<p>This package adds to the functionality of the ‘deldir’ package by computing the vertices of those tiles and traingles so that we can leverage functions that use polygons. Doing so simplifies tasks like color coding tiles (or triangles) or counting elements of interest within tiles (or triangles).</p>
<p>As an example, I use data from John Snow’s map of the 1854 cholera outbreak in the Soho area London.</p>
</div>
<div id="coloring-tiles" class="section level2">
<h2 class="hasAnchor">
<a href="#coloring-tiles" class="anchor"></a>Coloring Tiles</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># compute vertices of Voronoi tiles</span>
vertices &lt;-<span class="st"> </span><span class="kw"><a href="reference/deldirPolygons.html">deldirPolygons</a></span>(<span class="dt">sites =</span> cholera<span class="op">::</span>pumps,
  <span class="dt">rw.data =</span> cholera<span class="op">::</span>roads)

<span class="co"># define colors, plot map, and color code fatalities</span>
snow.colors &lt;-<span class="st"> </span>grDevices<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/grDevices/topics/adjustcolor">adjustcolor</a></span>(cholera<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/cholera/topics/snowColors">snowColors</a></span>(),
  <span class="dt">alpha.f =</span> <span class="dv">1</span><span class="op">/</span><span class="dv">3</span>)
cholera<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/cholera/topics/snowMap">snowMap</a></span>(<span class="dt">add.cases =</span> <span class="ot">FALSE</span>)
cholera<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/cholera/topics/addNeighborhoodCases">addNeighborhoodCases</a></span>(<span class="dt">metric =</span> <span class="st">"euclidean"</span>)

<span class="co"># plot color coded polygons</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/invisible">invisible</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">lapply</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/seq">seq_along</a></span>(vertices), <span class="cf">function</span>(i) {
  <span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/polygon">polygon</a></span>(vertices[[i]], <span class="dt">col =</span> snow.colors[[i]])
}))</code></pre></div>
<p><img src="index_files/figure-html/coloring-1.png" width="480" style="display: block; margin: auto;"></p>
</div>
<div id="counting-observations-in-tiles" class="section level2">
<h2 class="hasAnchor">
<a href="#counting-observations-in-tiles" class="anchor"></a>Counting Observations in Tiles</h2>
<p>To count the number of cases within each neighborhood, we can use sp::point.in.polygon().</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># compute vertices of Voronoi tiles</span>
vertices &lt;-<span class="st"> </span><span class="kw"><a href="reference/deldirPolygons.html">deldirPolygons</a></span>(<span class="dt">sites =</span> cholera<span class="op">::</span>pumps,
  <span class="dt">rw.data =</span> cholera<span class="op">::</span>roads)

<span class="co"># locations of the 578 fatalities in Soho</span>
cases &lt;-<span class="st"> </span>cholera<span class="op">::</span>fatalities.unstacked

<span class="co"># count fatalities within each polygon (neigborhood)</span>
census &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">lapply</a></span>(vertices, <span class="cf">function</span>(tile) {
  sp<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/sp/topics/point.in.polygon">point.in.polygon</a></span>(cases<span class="op">$</span>x, cases<span class="op">$</span>y, tile<span class="op">$</span>x, tile<span class="op">$</span>y)
})

<span class="co"># ID the 13 water pumps</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(census) &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste0</a></span>(<span class="st">"p"</span>, cholera<span class="op">::</span>pumps<span class="op">$</span>id)

<span class="co"># count of fatalities by neighborhood</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">vapply</a></span>(census, sum, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/integer">integer</a></span>(1L))
<span class="op">&gt;</span><span class="st">  </span>p1  p2  p3  p4  p5  p6  p7  p8  p9 p10 p11 p12 p13 
<span class="op">&gt;</span><span class="st">   </span><span class="dv">0</span>   <span class="dv">1</span>  <span class="dv">13</span>  <span class="dv">23</span>   <span class="dv">6</span>  <span class="dv">61</span> <span class="dv">361</span>  <span class="dv">16</span>  <span class="dv">27</span>  <span class="dv">62</span>   <span class="dv">2</span>   <span class="dv">2</span>   <span class="dv">4</span></code></pre></div>
</div>
<div id="counting-observations-in-triangles" class="section level2">
<h2 class="hasAnchor">
<a href="#counting-observations-in-triangles" class="anchor"></a>Counting Observations in Triangles</h2>
<p>To count the number of cases within each triangle:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># compute vertices of Delauny triangles</span>
vertices &lt;-<span class="st"> </span><span class="kw"><a href="reference/deldirPolygons.html">deldirPolygons</a></span>(<span class="dt">sites =</span> cholera<span class="op">::</span>pumps,
  <span class="dt">rw.data =</span> cholera<span class="op">::</span>roads, <span class="dt">type =</span> <span class="st">"triangles"</span>)

<span class="co"># locations of the 578 fatalities in Soho</span>
cases &lt;-<span class="st"> </span>cholera<span class="op">::</span>fatalities.unstacked

<span class="co"># count fatalities within each triangle</span>
census &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">lapply</a></span>(vertices, <span class="cf">function</span>(tile) {
  sp<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/sp/topics/point.in.polygon">point.in.polygon</a></span>(cases<span class="op">$</span>x, cases<span class="op">$</span>y, tile<span class="op">$</span>x, tile<span class="op">$</span>y)
})

<span class="co"># ID triangles</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(census) &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste0</a></span>(<span class="st">"t"</span>, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/seq">seq_along</a></span>(vertices))

<span class="co"># count of fatalities by triangle</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">vapply</a></span>(census, sum, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/integer">integer</a></span>(1L))
<span class="op">&gt;</span><span class="st">  </span>t1  t2  t3  t4  t5  t6  t7  t8  t9 t10 t11 t12 t13 t14 t15 t16 t17 
<span class="op">&gt;</span><span class="st">   </span><span class="dv">1</span>   <span class="dv">0</span>   <span class="dv">1</span>  <span class="dv">11</span>  <span class="dv">43</span> <span class="dv">179</span>  <span class="dv">35</span>   <span class="dv">2</span>  <span class="dv">18</span> <span class="dv">138</span>  <span class="dv">15</span>  <span class="dv">22</span>  <span class="dv">97</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">4</span>   <span class="dv">1</span></code></pre></div>
<div id="getting-started" class="section level3">
<h3 class="hasAnchor">
<a href="#getting-started" class="anchor"></a>getting started</h3>
<p>You can install the current development version of ‘deldirPolygons’ from GitHub:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Note that you may need to install the 'devtools' package:</span>
<span class="co"># install.packages("devtools")</span>

<span class="co"># For 'devtools' (&lt; 2.0.0)</span>
devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">"lindbrook/deldirPolygons"</span>, <span class="dt">build_vignettes =</span> <span class="ot">TRUE</span>)

<span class="co"># For 'devtools' (&gt;= 2.0.0)</span>
devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">"lindbrook/deldirPolygons"</span>, <span class="dt">build_opts =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"--no-resave-data"</span>, <span class="st">"--no-manual"</span>))</code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/lindbrook/deldirPolygons">https://​github.com/​lindbrook/​deldirPolygons</a>
</li>
<li>Report a bug at <br><a href="https://github.com/lindbrook/deldirPolygons/issues">https://​github.com/​lindbrook/​deldirPolygons/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>GPL (&gt;= 2)</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li> lindbrook <br><small class="roles"> Maintainer </small>  </li>
</ul>
</div>

      <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/lindbrook/deldirPolygons/blob/master/NEWS"><img src="https://img.shields.io/badge/GitHub-0.0.9012-red.svg" alt="GitHub_Status_Badge"></a></li>
</ul>
</div>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by  lindbrook.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
